{"ast":null,"code":"'use client';\n\nimport _objectSpread from \"/Users/ansarzeinulla/Desktop/negro/widget-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/ansarzeinulla/Desktop/negro/widget-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"autoInvoke\"];\nimport { useState, useRef, useCallback, useEffect } from 'react';\nfunction useFetch(url) {\n  let _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    {\n      autoInvoke = true\n    } = _ref,\n    options = _objectWithoutProperties(_ref, _excluded);\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const controller = useRef(null);\n  const refetch = useCallback(() => {\n    if (controller.current) {\n      controller.current.abort();\n    }\n    controller.current = new AbortController();\n    setLoading(true);\n    return fetch(url, _objectSpread({\n      signal: controller.current.signal\n    }, options)).then(res => res.json()).then(res => {\n      setData(res);\n      setLoading(false);\n      return res;\n    }).catch(err => {\n      setLoading(false);\n      if (err.name !== \"AbortError\") {\n        setError(err);\n      }\n      return err;\n    });\n  }, [url]);\n  const abort = useCallback(() => {\n    if (controller.current) {\n      var _controller$current;\n      (_controller$current = controller.current) === null || _controller$current === void 0 || _controller$current.abort(\"\");\n    }\n  }, []);\n  useEffect(() => {\n    if (autoInvoke) {\n      refetch();\n    }\n    return () => {\n      if (controller.current) {\n        controller.current.abort(\"\");\n      }\n    };\n  }, [refetch, autoInvoke]);\n  return {\n    data,\n    loading,\n    error,\n    refetch,\n    abort\n  };\n}\nexport { useFetch };","map":{"version":3,"names":["useFetch","url","_ref","arguments","length","undefined","autoInvoke","options","_objectWithoutProperties","_excluded","data","setData","useState","loading","setLoading","error","setError","controller","useRef","refetch","useCallback","current","abort","AbortController","fetch","_objectSpread","signal","then","res","json","catch","err","name","_controller$current","useEffect"],"sources":["/Users/ansarzeinulla/Desktop/negro/widget-frontend/node_modules/@mantine/hooks/src/use-fetch/use-fetch.ts"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport interface UseFetchOptions extends RequestInit {\n  autoInvoke?: boolean;\n}\n\nexport interface UseFetchReturnValue<T> {\n  data: T | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<any>;\n  abort: () => void;\n}\n\nexport function useFetch<T>(\n  url: string,\n  { autoInvoke = true, ...options }: UseFetchOptions = {}\n): UseFetchReturnValue<T> {\n  const [data, setData] = useState<T | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const controller = useRef<AbortController | null>(null);\n\n  const refetch = useCallback(() => {\n    if (controller.current) {\n      controller.current.abort();\n    }\n\n    controller.current = new AbortController();\n\n    setLoading(true);\n\n    return fetch(url, { signal: controller.current.signal, ...options })\n      .then((res) => res.json())\n      .then((res) => {\n        setData(res);\n        setLoading(false);\n        return res as T;\n      })\n      .catch((err) => {\n        setLoading(false);\n\n        if (err.name !== 'AbortError') {\n          setError(err);\n        }\n\n        return err;\n      });\n  }, [url]);\n\n  const abort = useCallback(() => {\n    if (controller.current) {\n      controller.current?.abort('');\n    }\n  }, []);\n\n  useEffect(() => {\n    if (autoInvoke) {\n      refetch();\n    }\n\n    return () => {\n      if (controller.current) {\n        controller.current.abort('');\n      }\n    };\n  }, [refetch, autoInvoke]);\n\n  return { data, loading, error, refetch, abort };\n}\n"],"mappings":";;;;;;AAcO,SAASA,SACdC,GAAA,EAEwB;EAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAD6B,EAAC;IAAtD;MAAEG,UAAA,GAAa;IAAS,CAAQ,GAAAJ,IAAA;IAARK,OAAA,GAAAC,wBAAA,CAAAN,IAAA,EAAAO,SAAA;EAExB,MAAM,CAACC,IAAA,EAAMC,OAAO,IAAIC,QAAA,CAAmB,IAAI;EAC/C,MAAM,CAACC,OAAA,EAASC,UAAU,IAAIF,QAAA,CAAS,KAAK;EAC5C,MAAM,CAACG,KAAA,EAAOC,QAAQ,IAAIJ,QAAA,CAAuB,IAAI;EACrD,MAAMK,UAAA,GAAaC,MAAA,CAA+B,IAAI;EAEtD,MAAMC,OAAA,GAAUC,WAAA,CAAY,MAAM;IAChC,IAAIH,UAAA,CAAWI,OAAA,EAAS;MACtBJ,UAAA,CAAWI,OAAA,CAAQC,KAAA,EAAM;IAC3B;IAEAL,UAAA,CAAWI,OAAA,GAAU,IAAIE,eAAA,EAAgB;IAEzCT,UAAA,CAAW,IAAI;IAEf,OAAOU,KAAA,CAAMvB,GAAA,EAAAwB,aAAA;MAAOC,MAAA,EAAQT,UAAA,CAAWI,OAAA,CAAQK;IAAA,GAAWnB,OAAA,CAAS,EAChEoB,IAAA,CAAMC,GAAA,IAAQA,GAAA,CAAIC,IAAA,EAAM,EACxBF,IAAA,CAAMC,GAAA,IAAQ;MACbjB,OAAA,CAAQiB,GAAG;MACXd,UAAA,CAAW,KAAK;MAChB,OAAOc,GAAA;IACT,CAAC,EACAE,KAAA,CAAOC,GAAA,IAAQ;MACdjB,UAAA,CAAW,KAAK;MAEhB,IAAIiB,GAAA,CAAIC,IAAA,KAAS,cAAc;QAC7BhB,QAAA,CAASe,GAAG;MACd;MAEA,OAAOA,GAAA;IACT,CAAC;EACL,GAAG,CAAC9B,GAAG,CAAC;EAER,MAAMqB,KAAA,GAAQF,WAAA,CAAY,MAAM;IAC9B,IAAIH,UAAA,CAAWI,OAAA,EAAS;MAAA,IAAAY,mBAAA;MACtB,CAAAA,mBAAA,GAAAhB,UAAA,CAAWI,OAAA,cAAAY,mBAAA,eAAXA,mBAAA,CAAoBX,KAAA,CAAM,EAAE;IAC9B;EACF,GAAG,EAAE;EAELY,SAAA,CAAU,MAAM;IACd,IAAI5B,UAAA,EAAY;MACda,OAAA,EAAQ;IACV;IAEA,OAAO,MAAM;MACX,IAAIF,UAAA,CAAWI,OAAA,EAAS;QACtBJ,UAAA,CAAWI,OAAA,CAAQC,KAAA,CAAM,EAAE;MAC7B;IACF;EACF,GAAG,CAACH,OAAA,EAASb,UAAU,CAAC;EAExB,OAAO;IAAEI,IAAA;IAAMG,OAAA;IAASE,KAAA;IAAOI,OAAA;IAASG;EAAA,CAAM;AAChD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}