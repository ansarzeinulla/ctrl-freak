{"ast":null,"code":"var _jsxFileName = \"/Users/ansarzeinulla/Desktop/negro/widget-frontend/src/App.js\",\n  _s = $RefreshSig$();\n// src/App.js\nimport { useState, useEffect, useRef } from 'react';\nimport { MantineProvider, Card, Text, Button, TextInput } from '@mantine/core';\nimport axios from 'axios';\n\n// URL нашего бэкенда\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:8000/api/hello';\nconst WS_URL = 'ws://localhost:8000/ws';\nfunction App() {\n  _s();\n  const [apiMessage, setApiMessage] = useState('Загрузка данных с бэка...');\n  const [wsMessages, setWsMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const socket = useRef(null);\n\n  // 1. Загружаем данные по HTTP при первом рендере\n  useEffect(() => {\n    axios.get(API_URL).then(response => {\n      setApiMessage(response.data.message);\n    }).catch(error => {\n      setApiMessage('Не удалось загрузить данные :(');\n      console.error(error);\n    });\n  }, []);\n\n  // 2. Устанавливаем соединение по WebSocket\n  useEffect(() => {\n    socket.current = new WebSocket(WS_URL);\n    socket.current.onopen = () => console.log('WebSocket соединение установлено');\n    socket.current.onclose = () => console.log('WebSocket соединение закрыто');\n    socket.current.onmessage = event => {\n      setWsMessages(prevMessages => [...prevMessages, event.data]);\n    };\n\n    // Закрываем соединение при размонтировании компонента\n    return () => {\n      socket.current.close();\n    };\n  }, []);\n  const sendMessage = () => {\n    if (inputValue && socket.current.readyState === WebSocket.OPEN) {\n      socket.current.send(inputValue);\n      setInputValue('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    shadow: \"sm\",\n    p: \"lg\",\n    radius: \"md\",\n    withBorder: true,\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      weight: 500,\n      children: \"\\u0422\\u0435\\u0441\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0432\\u0438\\u0434\\u0436\\u0435\\u0442\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      size: \"sm\",\n      color: \"dimmed\",\n      mt: \"md\",\n      children: [\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435 \\u0441 \\u0431\\u044D\\u043A\\u0435\\u043D\\u0434\\u0430 (HTTP): \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: apiMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n      label: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435 \\u0434\\u043B\\u044F WebSocket\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043A\\u0441\\u0442...\",\n      value: inputValue,\n      onChange: event => setInputValue(event.currentTarget.value),\n      mt: \"md\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: sendMessage,\n      mt: \"sm\",\n      children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E WS\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      size: \"sm\",\n      mt: \"lg\",\n      children: \"\\u041E\\u0442\\u0432\\u0435\\u0442\\u044B \\u043E\\u0442 WebSocket:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '100px',\n        overflowY: 'auto',\n        border: '1px solid #ccc',\n        padding: '5px',\n        marginTop: '5px'\n      },\n      children: wsMessages.map((msg, index) => /*#__PURE__*/_jsxDEV(Text, {\n        size: \"xs\",\n        children: msg\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n// Оборачиваем App в MantineProvider\n_s(App, \"3UejcwwhuYOaxQMGnRUcRnrR+Lk=\");\n_c = App;\nexport default function MantineApp() {\n  return /*#__PURE__*/_jsxDEV(MantineProvider, {\n    withGlobalStyles: true,\n    withNormalizeCSS: true,\n    children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MantineApp;\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"MantineApp\");","map":{"version":3,"names":["useState","useEffect","useRef","MantineProvider","Card","Text","Button","TextInput","axios","jsxDEV","_jsxDEV","API_URL","WS_URL","App","_s","apiMessage","setApiMessage","wsMessages","setWsMessages","inputValue","setInputValue","socket","get","then","response","data","message","catch","error","console","current","WebSocket","onopen","log","onclose","onmessage","event","prevMessages","close","sendMessage","readyState","OPEN","send","shadow","p","radius","withBorder","children","weight","fileName","_jsxFileName","lineNumber","columnNumber","size","color","mt","label","placeholder","value","onChange","currentTarget","onClick","style","maxHeight","overflowY","border","padding","marginTop","map","msg","index","_c","MantineApp","withGlobalStyles","withNormalizeCSS","_c2","$RefreshReg$"],"sources":["/Users/ansarzeinulla/Desktop/negro/widget-frontend/src/App.js"],"sourcesContent":["// src/App.js\nimport { useState, useEffect, useRef } from 'react';\nimport { MantineProvider, Card, Text, Button, TextInput } from '@mantine/core';\nimport axios from 'axios';\n\n// URL нашего бэкенда\nconst API_URL = 'http://localhost:8000/api/hello';\nconst WS_URL = 'ws://localhost:8000/ws';\n\nfunction App() {\n  const [apiMessage, setApiMessage] = useState('Загрузка данных с бэка...');\n  const [wsMessages, setWsMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const socket = useRef(null);\n\n  // 1. Загружаем данные по HTTP при первом рендере\n  useEffect(() => {\n    axios.get(API_URL)\n      .then(response => {\n        setApiMessage(response.data.message);\n      })\n      .catch(error => {\n        setApiMessage('Не удалось загрузить данные :(');\n        console.error(error);\n      });\n  }, []);\n\n  // 2. Устанавливаем соединение по WebSocket\n  useEffect(() => {\n    socket.current = new WebSocket(WS_URL);\n\n    socket.current.onopen = () => console.log('WebSocket соединение установлено');\n    socket.current.onclose = () => console.log('WebSocket соединение закрыто');\n\n    socket.current.onmessage = (event) => {\n      setWsMessages(prevMessages => [...prevMessages, event.data]);\n    };\n\n    // Закрываем соединение при размонтировании компонента\n    return () => {\n      socket.current.close();\n    };\n  }, []);\n\n  const sendMessage = () => {\n    if (inputValue && socket.current.readyState === WebSocket.OPEN) {\n      socket.current.send(inputValue);\n      setInputValue('');\n    }\n  };\n\n  return (\n    <Card shadow=\"sm\" p=\"lg\" radius=\"md\" withBorder>\n      <Text weight={500}>Тестовый виджет</Text>\n      <Text size=\"sm\" color=\"dimmed\" mt=\"md\">\n        Сообщение с бэкенда (HTTP): <b>{apiMessage}</b>\n      </Text>\n\n      <TextInput\n        label=\"Сообщение для WebSocket\"\n        placeholder=\"Введите текст...\"\n        value={inputValue}\n        onChange={(event) => setInputValue(event.currentTarget.value)}\n        mt=\"md\"\n      />\n      <Button onClick={sendMessage} mt=\"sm\">\n        Отправить по WS\n      </Button>\n\n      <Text size=\"sm\" mt=\"lg\">Ответы от WebSocket:</Text>\n      <div style={{ maxHeight: '100px', overflowY: 'auto', border: '1px solid #ccc', padding: '5px', marginTop: '5px' }}>\n        {wsMessages.map((msg, index) => (\n          <Text key={index} size=\"xs\">{msg}</Text>\n        ))}\n      </div>\n    </Card>\n  );\n}\n\n// Оборачиваем App в MantineProvider\nexport default function MantineApp() {\n  return (\n    <MantineProvider withGlobalStyles withNormalizeCSS>\n      <App />\n    </MantineProvider>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}