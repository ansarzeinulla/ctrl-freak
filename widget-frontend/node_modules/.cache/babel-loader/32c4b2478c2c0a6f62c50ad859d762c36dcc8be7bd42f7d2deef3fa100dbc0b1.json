{"ast":null,"code":"'use client';\n\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { useDelayGroup, useFloating, useInteractions, useHover, useRole, useDismiss } from '@floating-ui/react';\nimport { useId } from '@mantine/hooks';\nimport { useHoverCardGroupContext } from './HoverCardGroup/HoverCardGroup.context.mjs';\nfunction useHoverCard(settings) {\n  const [uncontrolledOpened, setUncontrolledOpened] = useState(settings.defaultOpened);\n  const controlled = typeof settings.opened === \"boolean\";\n  const opened = controlled ? settings.opened : uncontrolledOpened;\n  const withinGroup = useHoverCardGroupContext();\n  const uid = useId();\n  const openTimeout = useRef(-1);\n  const closeTimeout = useRef(-1);\n  const clearTimeouts = useCallback(() => {\n    window.clearTimeout(openTimeout.current);\n    window.clearTimeout(closeTimeout.current);\n  }, []);\n  const onChange = useCallback(_opened => {\n    setUncontrolledOpened(_opened);\n    if (_opened) {\n      var _settings$onOpen;\n      setCurrentId(uid);\n      (_settings$onOpen = settings.onOpen) === null || _settings$onOpen === void 0 || _settings$onOpen.call(settings);\n    } else {\n      var _settings$onClose;\n      (_settings$onClose = settings.onClose) === null || _settings$onClose === void 0 || _settings$onClose.call(settings);\n    }\n  }, [uid, settings.onOpen, settings.onClose]);\n  const {\n    context,\n    refs\n  } = useFloating({\n    open: opened,\n    onOpenChange: onChange\n  });\n  const {\n    delay: groupDelay,\n    setCurrentId\n  } = useDelayGroup(context, {\n    id: uid\n  });\n  const {\n    getReferenceProps,\n    getFloatingProps\n  } = useInteractions([useHover(context, {\n    enabled: true,\n    delay: withinGroup ? groupDelay : {\n      open: settings.openDelay,\n      close: settings.closeDelay\n    }\n  }), useRole(context, {\n    role: \"dialog\"\n  }), useDismiss(context, {\n    enabled: withinGroup\n  })]);\n  const openDropdown = useCallback(() => {\n    if (withinGroup) {\n      return;\n    }\n    clearTimeouts();\n    if (settings.openDelay === 0 || settings.openDelay === void 0) {\n      onChange(true);\n    } else {\n      openTimeout.current = window.setTimeout(() => onChange(true), settings.openDelay);\n    }\n  }, [withinGroup, clearTimeouts, settings.openDelay, onChange]);\n  const closeDropdown = useCallback(() => {\n    if (withinGroup) {\n      return;\n    }\n    clearTimeouts();\n    if (settings.closeDelay === 0 || settings.closeDelay === void 0) {\n      onChange(false);\n    } else {\n      closeTimeout.current = window.setTimeout(() => onChange(false), settings.closeDelay);\n    }\n  }, [withinGroup, clearTimeouts, settings.closeDelay, onChange]);\n  useEffect(() => () => clearTimeouts(), [clearTimeouts]);\n  return {\n    opened,\n    reference: refs.setReference,\n    floating: refs.setFloating,\n    getReferenceProps,\n    getFloatingProps,\n    openDropdown,\n    closeDropdown\n  };\n}\nexport { useHoverCard };","map":{"version":3,"names":["useHoverCard","settings","uncontrolledOpened","setUncontrolledOpened","useState","defaultOpened","controlled","opened","withinGroup","useHoverCardGroupContext","uid","useId","openTimeout","useRef","closeTimeout","clearTimeouts","useCallback","window","clearTimeout","current","onChange","_opened","_settings$onOpen","setCurrentId","onOpen","call","_settings$onClose","onClose","context","refs","useFloating","open","onOpenChange","delay","groupDelay","useDelayGroup","id","getReferenceProps","getFloatingProps","useInteractions","useHover","enabled","openDelay","close","closeDelay","useRole","role","useDismiss","openDropdown","setTimeout","closeDropdown","useEffect","reference","setReference","floating","setFloating"],"sources":["/Users/ansarzeinulla/Desktop/ctrl-freak/widget-frontend/node_modules/@mantine/core/src/components/HoverCard/use-hover-card.ts"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nimport {\n  useDelayGroup,\n  useDismiss,\n  useFloating,\n  useHover,\n  useInteractions,\n  useRole,\n} from '@floating-ui/react';\nimport { useId } from '@mantine/hooks';\nimport { useHoverCardGroupContext } from './HoverCardGroup/HoverCardGroup.context';\n\ninterface UseHoverCard {\n  openDelay?: number;\n  closeDelay?: number;\n  opened?: boolean;\n  defaultOpened?: boolean;\n  onOpen?: () => void;\n  onClose?: () => void;\n}\n\nexport function useHoverCard(settings: UseHoverCard) {\n  const [uncontrolledOpened, setUncontrolledOpened] = useState(settings.defaultOpened);\n  const controlled = typeof settings.opened === 'boolean';\n  const opened = controlled ? settings.opened : uncontrolledOpened;\n  const withinGroup = useHoverCardGroupContext();\n  const uid = useId();\n\n  const openTimeout = useRef(-1);\n  const closeTimeout = useRef(-1);\n\n  const clearTimeouts = useCallback(() => {\n    window.clearTimeout(openTimeout.current);\n    window.clearTimeout(closeTimeout.current);\n  }, []);\n\n  const onChange = useCallback(\n    (_opened: boolean) => {\n      setUncontrolledOpened(_opened);\n\n      if (_opened) {\n        setCurrentId(uid);\n        settings.onOpen?.();\n      } else {\n        settings.onClose?.();\n      }\n    },\n    [uid, settings.onOpen, settings.onClose]\n  );\n\n  const { context, refs } = useFloating({\n    open: opened,\n    onOpenChange: onChange,\n  });\n\n  const { delay: groupDelay, setCurrentId } = useDelayGroup(context, { id: uid });\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([\n    useHover(context, {\n      enabled: true,\n      delay: withinGroup ? groupDelay : { open: settings.openDelay, close: settings.closeDelay },\n    }),\n    useRole(context, { role: 'dialog' }),\n    useDismiss(context, { enabled: withinGroup }),\n  ]);\n\n  const openDropdown = useCallback(() => {\n    if (withinGroup) {\n      return; // Group mode handles this automatically\n    }\n\n    clearTimeouts();\n    if (settings.openDelay === 0 || settings.openDelay === undefined) {\n      onChange(true);\n    } else {\n      openTimeout.current = window.setTimeout(() => onChange(true), settings.openDelay);\n    }\n  }, [withinGroup, clearTimeouts, settings.openDelay, onChange]);\n\n  const closeDropdown = useCallback(() => {\n    if (withinGroup) {\n      return; // Group mode handles this automatically\n    }\n\n    clearTimeouts();\n    if (settings.closeDelay === 0 || settings.closeDelay === undefined) {\n      onChange(false);\n    } else {\n      closeTimeout.current = window.setTimeout(() => onChange(false), settings.closeDelay);\n    }\n  }, [withinGroup, clearTimeouts, settings.closeDelay, onChange]);\n\n  useEffect(() => () => clearTimeouts(), [clearTimeouts]);\n\n  return {\n    opened,\n    reference: refs.setReference,\n    floating: refs.setFloating,\n    getReferenceProps,\n    getFloatingProps,\n    openDropdown,\n    closeDropdown,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}